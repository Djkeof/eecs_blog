import{p as st,o as lt,b as it,i as nt,r as ot,s as D,a as vt,c as ct}from"./props.71-KuJER.js";import{a9 as ut,a5 as dt,u as h,U as ft,aa as pt,f as gt,t as ht,k as m,g as t,a as W,p as bt,d as g,b as mt,s as i,m as u,a4 as F,c as d,r as f,e as q,h as G,ab as K}from"./render.56WJjqnE.js";import{i as _t}from"./if.Copal2rR.js";import{b as xt}from"./input.BeEXayoT.js";/* empty css                        */function H(n,o){return n===o||n?.[pt]===o}function J(n={},o,r,e){return ut(()=>{var s,l;return dt(()=>{s=l,l=[],h(()=>{n!==r(...l)&&(o(n,...l),s&&H(r(...s),n)&&o(null,...s))})}),()=>{ft(()=>{l&&H(r(...l),n)&&o(null,...l)})}}),n}var yt=K('<svg viewBox="0 0 24 24" class="svelte-1orl126"><rect x="6" y="5" width="4" height="14" rx="1"></rect><rect x="14" y="5" width="4" height="14" rx="1"></rect></svg>'),wt=K('<svg viewBox="0 0 24 24" class="svelte-1orl126"><path d="M8 5v14l11-7z"></path></svg>'),kt=gt('<div class="player card-base card-shadow svelte-1orl126"><img/> <div class="info svelte-1orl126"><div class="title-container svelte-1orl126"><div class="title svelte-1orl126"> </div></div> <div class="time svelte-1orl126"> </div> <input type="range" min="0" step="0.01" class="progress svelte-1orl126"/></div> <div class="controls svelte-1orl126"><button aria-label="Last" class="ctrl btn-regular svelte-1orl126"><svg viewBox="0 0 24 24" class="svelte-1orl126"><path d="M16 5v14l-11-7z"></path></svg></button> <button aria-label="Play/Pause" class="ctrl btn-regular play-pause svelte-1orl126"><!></button> <button aria-label="Next" class="ctrl btn-regular svelte-1orl126"><svg viewBox="0 0 24 24" class="svelte-1orl126"><path d="M8 5v14l11-7z"></path></svg></button></div></div>');function Et(n,o){mt(o,!1);let r=st(o,"audioList",24,()=>[]),e,s=u(0),l=u(!1),_=u(0),c=u(0),C,p=u(0),x=1,S=0,T,y=u(),w=u();function N(a){const v=Math.floor(a/60).toString().padStart(2,"0"),A=Math.floor(a%60).toString().padStart(2,"0");return`${v}:${A}`}function O(){e&&(t(l)?e.pause():e.play(),i(l,!t(l)))}function E(){const a=r()[t(s)];!a||!e||(e.src=a.src,e.play().then(()=>{i(l,!0)}),X())}function Q(){r().length!==0&&(i(s,(t(s)-1+r().length)%r().length),E())}function U(){r().length!==0&&(i(s,(t(s)+1)%r().length),E())}function R(a){e&&(e.currentTime=+a.target.value,i(c,e.currentTime))}lt(async()=>{e=new Audio,e.loop=!1,e.addEventListener("loadedmetadata",()=>{i(_,e.duration)}),e.addEventListener("timeupdate",()=>{i(c,e.currentTime)}),e.addEventListener("ended",()=>U()),E(),C=setInterval(()=>{e&&i(c,e.currentTime)},200),await F(),X()}),it(()=>{clearInterval(C),clearInterval(T),e&&(e.pause(),e.src="",e=null)});async function X(){if(clearInterval(T),i(p,0),x=1,await F(),t(y)&&t(w)){const a=t(y).scrollWidth,v=t(w).clientWidth;S=a-v,S>0&&(T=setInterval(()=>{i(p,t(p)+x),(t(p)>=S||t(p)<=0)&&(x=-x)},100))}}nt();var B=kt(),b=d(B);let Y;var P=g(b,2),k=d(P),L=d(k),V=d(L,!0);f(L),J(L,a=>i(y,a),()=>t(y)),f(k),J(k,a=>i(w,a),()=>t(w));var z=g(k,2),Z=d(z);f(z);var I=g(z,2);ot(I),f(P);var $=g(P,2),j=d($),M=g(j,2),tt=d(M);{var at=a=>{var v=yt();W(a,v)},et=a=>{var v=wt();W(a,v)};_t(tt,a=>{t(l)?a(at):a(et,!1)})}f(M);var rt=g(M,2);f($),f(B),ht((a,v,A)=>{D(b,"src",(q(r()),t(s),h(()=>r()[t(s)]?.cover))),D(b,"alt",(q(r()),t(s),h(()=>r()[t(s)]?.name))),Y=vt(b,1,"cover svelte-1orl126",null,Y,a),ct(L,`transform: translateX(-${t(p)??""}px);`),G(V,(q(r()),t(s),h(()=>r()[t(s)]?.name))),G(Z,`${v??""} / ${A??""}`),D(I,"max",t(_))},[()=>({spinning:t(l)}),()=>(t(c),h(()=>N(t(c)))),()=>(t(_),h(()=>N(t(_))))]),m("click",b,O),xt(I,()=>t(c),a=>i(c,a)),m("input",I,R),m("click",j,Q),m("click",M,O),m("click",rt,U),W(n,B),bt()}export{Et as default};
