import{p as rt,o as lt,b as it,i as nt,r as vt,s as D,a as ct,c as ot}from"./props.eMN-HKMU.js";import{a9 as ft,a5 as ut,u as h,U as dt,aa as gt,f as pt,t as ht,k as b,g as t,a as W,p as mt,d as p,b as bt,s as i,m as f,ab as F,c as u,r as d,e as q,h as G,ac as K}from"./render.BKyXF6Ps.js";import{i as _t}from"./if.sCyKZ1YK.js";import{b as xt}from"./input.hgbir3wJ.js";/* empty css                        */function H(n,v){return n===v||n?.[gt]===v}function J(n={},v,e,a){return ft(()=>{var r,l;return ut(()=>{r=l,l=[],h(()=>{n!==e(...l)&&(v(n,...l),r&&H(e(...r),n)&&v(null,...r))})}),()=>{dt(()=>{l&&H(e(...l),n)&&v(null,...l)})}}),n}var yt=K('<svg viewBox="0 0 24 24" class="svelte-gfs78n"><rect x="6" y="5" width="4" height="14" rx="1"></rect><rect x="14" y="5" width="4" height="14" rx="1"></rect></svg>'),kt=K('<svg viewBox="0 0 24 24" class="svelte-gfs78n"><path d="M8 5v14l11-7z"></path></svg>'),wt=pt('<div class="player svelte-gfs78n"><img/> <div class="info svelte-gfs78n"><div class="title-container svelte-gfs78n"><div class="title svelte-gfs78n"> </div></div> <div class="time svelte-gfs78n"> </div> <input type="range" min="0" step="0.01" class="progress svelte-gfs78n"/></div> <div class="controls svelte-gfs78n"><button aria-label="Last" class="ctrl svelte-gfs78n"><svg viewBox="0 0 24 24" class="svelte-gfs78n"><path d="M16 5v14l-11-7z"></path></svg></button> <button aria-label="Play/Pause" class="ctrl play-pause svelte-gfs78n"><!></button> <button aria-label="Next" class="ctrl svelte-gfs78n"><svg viewBox="0 0 24 24" class="svelte-gfs78n"><path d="M8 5v14l11-7z"></path></svg></button></div></div>');function Et(n,v){bt(v,!1);let e=rt(v,"audioList",24,()=>[]),a,r=f(0),l=f(!1),_=f(0),o=f(0),C,g=f(0),x=1,S=0,T,y=f(),k=f();function N(s){const c=Math.floor(s/60).toString().padStart(2,"0"),A=Math.floor(s%60).toString().padStart(2,"0");return`${c}:${A}`}function O(){a&&(t(l)?a.pause():a.play(),i(l,!t(l)))}function E(){const s=e()[t(r)];!s||!a||(a.src=s.src,a.play().then(()=>{i(l,!0)}),X())}function Q(){e().length!==0&&(i(r,(t(r)-1+e().length)%e().length),E())}function U(){e().length!==0&&(i(r,(t(r)+1)%e().length),E())}function R(s){a&&(a.currentTime=+s.target.value,i(o,a.currentTime))}lt(async()=>{a=new Audio,a.loop=!1,a.addEventListener("loadedmetadata",()=>{i(_,a.duration)}),a.addEventListener("timeupdate",()=>{i(o,a.currentTime)}),a.addEventListener("ended",()=>U()),E(),C=setInterval(()=>{a&&i(o,a.currentTime)},200),await F(),X()}),it(()=>{clearInterval(C),clearInterval(T),a&&(a.pause(),a.src="",a=null)});async function X(){if(clearInterval(T),i(g,0),x=1,await F(),t(y)&&t(k)){const s=t(y).scrollWidth,c=t(k).clientWidth;S=s-c,S>0&&(T=setInterval(()=>{i(g,t(g)+x),(t(g)>=S||t(g)<=0)&&(x=-x)},100))}}nt();var B=wt(),m=u(B);let Y;var P=p(m,2),w=u(P),L=u(w),V=u(L,!0);d(L),J(L,s=>i(y,s),()=>t(y)),d(w),J(w,s=>i(k,s),()=>t(k));var z=p(w,2),Z=u(z);d(z);var I=p(z,2);vt(I),d(P);var $=p(P,2),j=u($),M=p(j,2),tt=u(M);{var st=s=>{var c=yt();W(s,c)},at=s=>{var c=kt();W(s,c)};_t(tt,s=>{t(l)?s(st):s(at,!1)})}d(M);var et=p(M,2);d($),d(B),ht((s,c,A)=>{D(m,"src",(q(e()),t(r),h(()=>e()[t(r)]?.cover))),D(m,"alt",(q(e()),t(r),h(()=>e()[t(r)]?.name))),Y=ct(m,1,"cover svelte-gfs78n",null,Y,s),ot(L,`transform: translateX(-${t(g)??""}px);`),G(V,(q(e()),t(r),h(()=>e()[t(r)]?.name))),G(Z,`${c??""} / ${A??""}`),D(I,"max",t(_))},[()=>({spinning:t(l)}),()=>(t(o),h(()=>N(t(o)))),()=>(t(_),h(()=>N(t(_))))]),b("click",m,O),xt(I,()=>t(o),s=>i(o,s)),b("input",I,R),b("click",j,Q),b("click",M,O),b("click",et,U),W(n,B),mt()}export{Et as default};
